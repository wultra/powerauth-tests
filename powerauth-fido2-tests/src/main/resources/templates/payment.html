<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PowerAuth & FIDO2 Demo | Wultra</title>

    <link rel="stylesheet" th:href="@{/resources/css/wultra-theme.min.css}">
    <link rel="stylesheet" th:href="@{/resources/css/wultra-login.css}">
    <link rel="shortcut icon" type="image/png" th:href="@{/resources/images/favicon.png}"/>

    <!-- API Path Context of the spring controller -->
    <script>
        const SERVLET_CONTEXT_PATH = "[[${servletContextPath}]]";
    </script>
    <script th:src="@{/resources/js/jquery.min.js}"></script>
    <script th:src="@{/resources/js/webauthn.js}"></script>
    <script th:src="@{/resources/js/payment.js}"></script>
</head>
<body>

<img th:src="@{/resources/images/logo_white.svg}" class="header-logo">

<div class="content-wrapper">
    <h5 class="header">DEMO</h5>
    <h2 class="headline">PowerAuth & FIDO2</h2>

    <div class="flex-grid">
        <div class="col1">
            <div>
                <p class="body-copy">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque finibus efficitur orci. Quisque
                    pharetra ipsum ante. Aliquam ante nisi, ultricies vel faucibus ut, varius at tellus.
                </p>
                <p class="body-copy">
                    Sed ipsum quam, lobortis non nisl eget, sodales ullamcorper lacus. Sed varius augue auctor, dictum
                    mauris et, aliquet odio. In tristique dui blandit lectus scelerisque, auctor mattis felis efficitur.
                    Quisque nec ornare metus, at rutrum massa. Mauris elementum erat non mollis venenatis.
                </p>
                <p class="body-copy">
                    Donec ultrices nisl eu tellus finibus pellentesque. Nam molestie neque ut ligula ultrices, vel
                    facilisis lorem rhoncus. Praesent sodales dolor vitae odio vestibulum tempor. In blandit rhoncus dui
                    sit amet tempor. Maecenas dapibus ante vel velit lobortis, at volutpat turpis venenatis.
                </p>
            </div>
        </div>

        <div class="col2">
            <div class="form-wrapper">
                <div class="form-panel">

                    <!-- On submit, handle form in javascript -->
                    <form class="form-signin" onsubmit="handlePaymentSubmit(); return false;">
                        <p class="body-copy">Try to process a payment now.</p>
                        <p class="body-copy tiny" th:unless="${hideDeveloperOption}">
                            Logged in as <strong th:text="${userId}"></strong>
                            in application <strong th:text="${applicationId}"></strong>.
                        </p>

                        <!-- Main form fields -->
                        <div class="form-group" id="divFormFields">
                            <input type="text" id="userId" th:value="${userId}" hidden/>

                            <input type="text" id="applicationId" th:value="${applicationId}" hidden/>

                            <label for="iban" class="label">IBAN</label>
                            <input type="text" id="iban" value="CZ5508000000001234567899" placeholder="IBAN" class="form-control input-text" required/>

                            <label for="amount" class="label">Amount</label>
                            <input type="text" id="amount" value="21" placeholder="Amount" class="form-control input-text" required/>

                            <label for="currency" class="label">Currency</label>
                            <input type="text" id="currency" value="CZK" placeholder="Currency" class="form-control input-text" required/>

                            <div class="form-group" th:unless="${hideDeveloperOption}">
                                <button type="button" id="addFieldBtn" class="btn btn-primary btn-block btn-xs">Add operation parameter</button>
                            </div>
                        </div>

                        <!-- Operation template and user verification selection -->
                        <div class="form-group" th:attr="hidden=${hideDeveloperOption ? 'hidden' : null}">
                            <label for="operationTemplate" class="label">Operation Template</label>
                            <select id="operationTemplate" class="form-control input-text">
                                <option th:each="option : ${templates}" th:value="${option}" th:text="${option}" th:selected="${option} == payment ? true : false"></option>
                            </select>

                            <label for="userVerification" class="label">User Verification</label>
                            <select id="userVerification" class="form-control input-text">
                                <option selected>required</option>
                                <option>preferred</option>
                                <option>discouraged</option>
                            </select>
                        </div>

                        <!-- Info and error banners -->
                        <div id="errorDiv" class="alert alert-danger" hidden="hidden">
                            <span id="errorMessage"></span>
                        </div>
                        <div id="successDiv" class="alert alert-success" hidden="hidden">
                            Success!
                        </div>

                        <!-- Submit or logout button -->
                        <div class="form-group">
                            <button type="submit" id="payBtn" class="btn btn-primary btn-block">Pay</button>
                        </div>

                        <button type="button" id="logoutBtn" class="btn btn-danger btn-block btn-xs">Logout</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>